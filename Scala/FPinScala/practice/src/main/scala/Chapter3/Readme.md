# 제3장 함수적 자료구조

## 3.1 함수적 자료구조의 정의

함수적 자료구조란 오직 순수 함수만으로 조작되는 자료구조이다. 순수 함수는 자료를 
그 자리에서 변경하거나 기타 부수 효과를 수행하는 일이 없어야 한다. **따라서 
함수적 자료구조는 정의에 의해 불변이다.**

**공변과 불변에 대해**

> `trait List[+A]` 선언에서 형식 매개변수 `A` 앞에 붙은 `+` 는 `A` 가 `List` 의 
**공변** 매개변수임을 뜻하는 가변 지정자이다. 그러한 매개변수를 '양의' 매개변수라고 
부르기도 한다. 이것이 뜻하는 바는, 예를 들어 `Dog` 가 `Animal` 의 하위형식 이면 
`List[Dog]` 가 `List[Animal]` 의 하위형식으로 간주된다는 것이다. 반면 만일 `A` 앞에 
`+` 가 없으면 그 형식 매개변수에 대해 `List` 는 불변이다.  
그런데 `Nil` 이 `List[Nothing]` 을 확장함을 주목하자. `Nothing` 은 모든 형식의 
하위형식이고 `A` 가 공변이므로 `Nil` 을 `List[Int]` 나 `List[Double]` 등 그 어떤 
형식의 목록으로도 간주 할 수 있다.

# 3.3 함수적 자료구조의 자료 공유
자료가 불변이라면, 예를 들어 목록에 요소를 추가하거나 목록에서 요소를 제거하는 
함수는 어떻게 작성해야 할까? 기존 목록 `xs` 의 앞에 `1` 이라는 요소를 추가하려면 
`Cons(1, xs)` 라는 새 목록을 만들면 된다. 목록은 불변이므로, `xs` 를 실제로 복사할 
필요없이 재사용하면 된다. 이를 **자료 공유** 라고 부른다.  
마찬가지로, 목록 `mylist = Cons(x, xs)` 의 앞 요소를 제거하려 한다면 그냥 목록의 
꼬리인 `xs` 를 돌려주면 된다. 실질적인 제거는 일어나지 않고, 원래의 목록은 사용 
가능한 상태이다. 이를 두고 함수적자료구는 **영속적**이라고 말한다.

